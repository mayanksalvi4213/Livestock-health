{% extends 'base.html' %}

{% block title %}Change Password - Livestock Health{% endblock %}

{% block styles %}
<style>
  .password-container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .password-section {
    background-color: white;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }
  
  .password-section h3 {
    color: #198754;
    margin-bottom: 15px;
    font-size: 1.3rem;
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 10px;
  }
  
  .back-btn {
    margin-bottom: 20px;
  }
  
  .password-requirements {
    margin-top: 20px;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 5px;
    border-left: 4px solid #198754;
  }
  
  .password-requirements h4 {
    font-size: 1rem;
    color: #198754;
    margin-bottom: 10px;
  }
  
  .password-requirements ul {
    padding-left: 20px;
    margin-bottom: 0;
  }
</style>
{% endblock %}

{% block content %}
<div class="container password-container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Change Password</h1>
    <a href="{{ url_for('profile.index') }}" class="btn btn-outline-secondary back-btn">
      <i class="fas fa-arrow-left"></i> Back to Profile
    </a>
  </div>
  
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
  
  <div class="password-section">
    <h3><i class="fas fa-key me-2"></i> Password Update</h3>
    
    <form method="post">
      <div class="mb-3">
        <label for="current_password" class="form-label">Current Password</label>
        <input type="password" class="form-control" id="current_password" name="current_password" required>
      </div>
      
      <div class="mb-3">
        <label for="new_password" class="form-label">New Password</label>
        <input type="password" class="form-control" id="new_password" name="new_password" minlength="8" required>
      </div>
      
      <div class="mb-3">
        <label for="confirm_password" class="form-label">Confirm New Password</label>
        <input type="password" class="form-control" id="confirm_password" name="confirm_password" minlength="8" required>
      </div>
      
      <div class="password-requirements">
        <h4>Password Requirements</h4>
        <ul>
          <li>Minimum 8 characters long</li>
          <li>Must be different from your current password</li>
        </ul>
      </div>
      
      <div class="d-grid mt-4">
        <button type="submit" class="btn btn-primary btn-lg">Update Password</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Password validation
  const newPassword = document.getElementById('new_password');
  const confirmPassword = document.getElementById('confirm_password');
  
  function validatePassword() {
    if (newPassword.value !== confirmPassword.value) {
      confirmPassword.setCustomValidity("Passwords don't match");
    } else {
      confirmPassword.setCustomValidity('');
    }
  }
  
  newPassword.addEventListener('change', validatePassword);
  confirmPassword.addEventListener('keyup', validatePassword);
</script>
{% endblock %} 