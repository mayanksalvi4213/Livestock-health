{% extends 'base.html' %}

{% block title %}Notifications - Livestock Health{% endblock %}

{% block styles %}
<style>
  .notifications-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .notification-card {
    margin-bottom: 15px;
    border-left: 4px solid #ccc;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: transform 0.2s;
  }
  
  .notification-card:hover {
    transform: translateY(-2px);
  }
  
  .notification-card.unread {
    border-left-color: #157347;
    background-color: rgba(21, 115, 71, 0.05);
  }
  
  .notification-card.disease-alert {
    border-left-color: #dc3545;
  }
  
  .notification-card.health-alert {
    border-left-color: #fd7e14;
  }
  
  .notification-card.info {
    border-left-color: #0d6efd;
  }
  
  .notification-title {
    font-weight: 600;
    margin-bottom: 5px;
  }
  
  .notification-message {
    color: #666;
  }
  
  .notification-date {
    font-size: 0.8rem;
    color: #888;
  }
  
  .notification-icon {
    font-size: 1.8rem;
    margin-right: 15px;
    color: #495057;
  }
  
  .disease-alert .notification-icon {
    color: #dc3545;
  }
  
  .health-alert .notification-icon {
    color: #fd7e14;
  }
  
  .info .notification-icon {
    color: #0d6efd;
  }
  
  .empty-notifications {
    text-align: center;
    padding: 40px 20px;
    color: #6c757d;
  }
  
  .go-back-btn {
    margin-bottom: 20px;
  }
</style>
{% endblock %}

{% block content %}
<div class="container notifications-container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Notifications</h1>
    <a href="{{ url_for('dashboard.index') }}" class="btn btn-outline-secondary go-back-btn">
      <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
  </div>
  
  {% if notifications %}
    {% for notification in notifications %}
      <div class="card notification-card {% if not notification.is_read %}unread{% endif %} {{ notification.notification_type }}">
        <div class="card-body d-flex">
          <div class="notification-icon">
            {% if notification.notification_type == 'disease_alert' %}
              <i class="fas fa-exclamation-triangle"></i>
            {% elif notification.notification_type == 'health_alert' %}
              <i class="fas fa-heartbeat"></i>
            {% else %}
              <i class="fas fa-info-circle"></i>
            {% endif %}
          </div>
          <div>
            <h5 class="notification-title">{{ notification.title }}</h5>
            <p class="notification-message">{{ notification.message }}</p>
            <div class="notification-date">
              {{ notification.created_at.strftime('%d %b %Y, %I:%M %p') }}
              {% if notification.distance_km %}
                <span class="ms-2 badge bg-secondary">{{ notification.distance_km|round(1) }} km away</span>
              {% endif %}
            </div>
            
            {% if notification.notification_type == 'disease_alert' and notification.related_disease %}
              <div class="mt-2">
                <a href="{{ url_for('health.disease_info', disease=notification.related_disease) }}" class="btn btn-sm btn-outline-primary">
                  Learn More About {{ notification.related_disease }}
                </a>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="empty-notifications">
      <i class="fas fa-bell-slash fa-3x mb-3"></i>
      <h4>No Notifications</h4>
      <p>You don't have any notifications at this time.</p>
    </div>
  {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
  // Reset notification counter
  if (window.updateNotificationCounter) {
    window.updateNotificationCounter(0);
  }
</script>
{% endblock %} 